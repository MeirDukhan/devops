- hosts: localhost
  tasks:
    - name: Install git
      yum: name=git state=latest 
      become: yes
      become_method: sudo

    - name: Clone repo MeirDukhan / devops
      git: clone=yes repo=https://github.com/MeirDukhan/devops.git dest=/home/ec2-user/DevOps_Ex1

    - name: Clone repo MeirDukhan / devops
      git: clone=yes repo=https://github.com/MeirDukhan/spring-petclinic.git dest=/home/ec2-user/SP
    
    - name: Install docker and add 'docker' groupto "ec2-user"
      yum: name=docker state=latest
      become: yes
      become_method: sudo

    - name: Add 'docker' group to "ec2-user"
      become: yes
      become_method: sudo
      user: name=docker groups=ec2-user 

    - name: STart the docker service
      service: name=docker state=started

